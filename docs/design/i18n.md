# 多言語対応戦略

**作成日**: 2024年12月
**更新日**: 2025年12月

---

## 8.1 翻訳対象の選別

### 必須翻訳（高品質な翻訳が必要）

**対象**:

- 先生からの説明・指示文（演目の解釈、衣装の仕様、変更理由など）
- 保護者からのコメント・質問（「サイズが合わない」「作り方がわからない」など）
- 重要な通知メッセージ（日程変更、至急の確認依頼など）

**理由**:

- ニュアンスの誤解が準備に支障をきたす
- 細かい表現の違いが重要

**手法**:

- TPOコンテキストを活用した高精度翻訳
- バレエ用語辞書の参照
- 編集時に事前生成、DBに保存

### 英語統一（翻訳不要）

**対象**:

- ステータス表記: `Pending` / `In Progress` / `Completed` / `Issue`
- カテゴリ・ラベル: `Costume` / `Props` / `Backstage Tasks`
- UIアクション: `Save` / `Cancel` / `Edit` / `Delete`
- 日付・時刻: ISO 8601形式（`2024-12-25 18:00`）

**理由**:

- 単語レベルで意味が明確
- UIで視覚的にも判別可能（アイコン併用）
- 情報の一貫性が向上（解釈のブレがない）
- データ容量・翻訳コストの削減

### 原語維持（参考訳は任意）

**対象**:

- 演目名: `Swan Lake`, `The Nutcracker`
- 役名: `Odette`, `Clara`
- 専門用語: `Grand Jeté`, `Arabesque`

**理由**:

- バレエ作品の国際的な固有名詞
- 翻訳すると逆に混乱を招く
- 必要に応じて参考訳を併記（例: `Swan Lake（白鳥の湖）`）

## 8.2 翻訳生成のタイミング

**編集時に事前生成**

```
[管理者が説明文を入力/更新]
    ↓
[Workers AI で翻訳を生成]
    ↓ (TPOコンテキスト + 用語辞書を付与)
[translations テーブルに保存]
    ↓
[閲覧時は DB から取得]
```

**メリット**:

- 同じテキストを何度も翻訳しない（コスト削減）
- 翻訳結果が一貫する（ユーザーごとのブレがない）
- 閲覧時のレスポンス高速化
- 翻訳精度向上のためのコンテキスト活用が容易

**再翻訳**:

- 管理画面に「翻訳を再生成」ボタンを提供
- 用語辞書更新時に一括再翻訳も可能

## 8.3 TPOコンテキストの活用

翻訳時にAIへ提供するコンテキスト情報。

### Time（時）

- 通常連絡 / 緊急連絡 / リマインダー
- 期日情報の有無

### Place（場所）

- レッスン / リハーサル / 本番 / 準備作業
- 対象の教室・会場

### Occasion（場合）

- 対象読者: 先生 / 保護者 / 生徒
- 目的: 指示 / 通知 / 依頼 / 確認
- 緊急度: 通常 / 注意 / 至急
- 専門領域: 技術 / 衣装 / 事務 / 一般

### 翻訳プロンプト例

```
Context:
- Time: Urgent notice with deadline 2024-12-20
- Place: Costume preparation for recital
- Occasion: Request to parents, High urgency
- Domain: Ballet costume

Glossary:
- tutu: チュチュ (ballet skirt)
- romantic tutu: ロマンティックチュチュ (longer, softer tutu)

Translate to Japanese:
"Please check if the romantic tutu fits your daughter by December 20.
If there are any size issues, let us know immediately."
```

期待される出力:

```
「12月20日までにロマンティックチュチュ（長めのふんわりしたスカート）が
お嬢様に合うかご確認ください。サイズに問題がある場合は至急お知らせください。」
```

## 8.4 データ容量の比較

**全翻訳方式**:

```
description.ja: "ふんわりとしたロマンティックチュチュ" (48 bytes)
description.en: "Soft romantic tutu" (18 bytes)
description.ru: "Мягкая романтическая пачка" (52 bytes)
status.ja: "準備中" (9 bytes)
status.en: "In Progress" (11 bytes)
status.ru: "В процессе" (20 bytes)
合計: 158 bytes
```

**選択的翻訳方式**:

```
description.ja/en/ru: 118 bytes (同上)
status: "In Progress" (11 bytes) ← 英語統一
合計: 129 bytes
```

**削減効果**:

- 1アイテムあたり 29 bytes 削減 (18%減)
- 100アイテムで 2.9KB 削減
- 翻訳APIコールも約40%削減
